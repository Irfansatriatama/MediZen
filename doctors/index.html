<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Cari Dokter â€” MediZen</title>
<link rel="stylesheet" href="doctors.css">
</head>
<body>
<div class="app-shell">

  <div class="page-header">
    <a href="../home/index.html" class="icon-btn">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="15 18 9 12 15 6"/></svg>
    </a>
    <div class="page-header-title">Cari Dokter</div>
    <button class="icon-btn" onclick="MediZen.toast('Filter lanjutan segera hadir','info')">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="4" y1="6" x2="20" y2="6"/><line x1="8" y1="12" x2="16" y2="12"/><line x1="11" y1="18" x2="13" y2="18"/></svg>
    </button>
  </div>

  <div class="doctors-page">

    <div class="search-bar-wrap">
      <div class="search-bar">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" id="search-input" placeholder="Nama dokter atau spesialisasi..." autocomplete="off">
      </div>
    </div>

    <div class="filter-scroll" id="spec-filter">
      <div class="filter-chip active" data-spec="all">Semua</div>
      <div class="filter-chip" data-spec="Umum">Dokter Umum</div>
      <div class="filter-chip" data-spec="Psikologi">Psikologi</div>
      <div class="filter-chip" data-spec="Gizi">Gizi Klinik</div>
      <div class="filter-chip" data-spec="Jantung">Jantung</div>
      <div class="filter-chip" data-spec="Anak">Anak</div>
      <div class="filter-chip" data-spec="Kulit">Kulit</div>
      <div class="filter-chip" data-spec="Gigi">Gigi</div>
      <div class="filter-chip" data-spec="Saraf">Saraf</div>
    </div>

    <div class="doctors-promo">
      <div class="promo-icon-wrap">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0ABAB5" stroke-width="2" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      </div>
      <div class="promo-text">
        <div class="promo-tag">MediZen Premium</div>
        <div class="promo-headline">Konsultasi Gratis Minggu Ini</div>
        <div class="promo-sub">1 sesi gratis dengan dokter spesialis pilihan</div>
      </div>
    </div>

    <div style="display:flex;align-items:center;justify-content:space-between;padding:0 20px 12px;">
      <div style="font-size:13px;color:var(--text-secondary);" id="result-count">Memuat...</div>
      <select id="sort-select" style="background:var(--bg-elevated);border:1px solid var(--border);border-radius:var(--radius-full);padding:6px 12px;font-size:13px;color:var(--text);font-family:var(--font-body);outline:none;cursor:pointer;">
        <option value="rating">Rating Tertinggi</option>
        <option value="price">Harga Terendah</option>
        <option value="experience">Pengalaman</option>
        <option value="reviews">Ulasan Terbanyak</option>
      </select>
    </div>

    <div class="doctors-list" id="doctors-list"></div>

    <div class="empty-state hidden" id="empty-state">
      <div class="empty-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </div>
      <div class="empty-title">Dokter Tidak Ditemukan</div>
      <div class="empty-desc">Coba kata kunci lain atau ubah filter spesialisasi</div>
    </div>

  </div>

    <nav class="bottom-nav">
    <a href="../home/index.html" class="nav-item">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      <span class="nav-label">Beranda</span>
    </a>
    <a href="../search/index.html" class="nav-item">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <span class="nav-label">Search</span>
    </a>
    <a href="../doctors/index.html" class="nav-item active">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      <span class="nav-label">Dokter</span>
    </a>
    <a href="../chatbot/index.html" class="nav-item">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      <span class="nav-label">AI Chat</span>
    </a>
    <a href="../profile/index.html" class="nav-item">
      <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      <span class="nav-label">Profil</span>
    </a>
  </nav>
</div>

<script src="../assets/js/utils.js"></script>
<script>
if (!MediZen.auth.isLoggedIn()) window.location.href = '../auth/login.html';

const DOCTORS = [
  { id:1, name:'dr. Amalia Putri, Sp.PD', spec:'Umum', specLabel:'Dokter Penyakit Dalam', hospital:'RS Harapan Bunda', experience:8, rating:4.9, reviews:312, price:85000, online:true, slots:5, about:'Dokter spesialis penyakit dalam dengan pengalaman lebih dari 8 tahun. Berpengalaman dalam penanganan penyakit metabolik, diabetes, hipertensi, dan gangguan tiroid. Menyelesaikan pendidikan spesialis di FKUI Jakarta.', education:'FK Universitas Indonesia | Sp.PD FKUI 2016', languages:['Indonesia','Inggris'], initials:'AP', color:'linear-gradient(135deg,#0ABAB5,#0891B2)', reviews_list:[{name:'Rina S.',date:'2 hari lalu',rating:5,text:'Dokternya sangat ramah dan penjelasannya mudah dipahami. Sangat direkomendasikan!'},{name:'Budi W.',date:'5 hari lalu',rating:5,text:'Konsultasi sangat memuaskan, dokter sabar menjawab semua pertanyaan saya.'},{name:'Fitri A.',date:'1 minggu lalu',rating:4,text:'Pelayanan bagus, diagnosisnya tepat. Kondisi saya sudah membaik.'}] },
  { id:2, name:'dr. Rizky Firmansyah, M.Psi', spec:'Psikologi', specLabel:'Psikolog Klinis', hospital:'Klinik Jiwa Sehat', experience:6, rating:4.8, reviews:189, price:0, online:true, slots:3, about:'Psikolog klinis bersertifikat dengan fokus pada penanganan depresi, kecemasan, stress, dan masalah hubungan interpersonal. Menggunakan pendekatan CBT dan mindfulness-based therapy.', education:'S1 Psikologi UGM | Magister Psikologi Klinis UI 2018', languages:['Indonesia','Inggris'], initials:'RF', color:'linear-gradient(135deg,#BC8CFF,#7C3AED)', reviews_list:[{name:'Maya D.',date:'1 hari lalu',rating:5,text:'Sangat membantu saya melewati masa sulit. Metode yang digunakan efektif.'},{name:'Arief P.',date:'3 hari lalu',rating:5,text:'Konsultasi pertama saya terasa nyaman dan tidak awkward sama sekali.'},{name:'Sari N.',date:'1 minggu lalu',rating:4,text:'Baik dan pengertian. Sudah beberapa sesi dan ada perkembangan positif.'}] },
  { id:3, name:'dr. Siti Nurhaliza, Sp.GK', spec:'Gizi', specLabel:'Spesialis Gizi Klinik', hospital:'RSIA Bunda Menteng', experience:10, rating:4.7, reviews:245, price:120000, online:false, slots:7, about:'Spesialis gizi klinik dengan pengalaman 10 tahun dalam program penurunan berat badan, diet terapeutik untuk penyakit kronik, nutrisi olahraga, dan tatalaksana gizi pada anak.', education:'FK Universitas Airlangga | Sp.GK Undip 2014', languages:['Indonesia'], initials:'SN', color:'linear-gradient(135deg,#39D353,#059669)', reviews_list:[{name:'Dewi R.',date:'2 hari lalu',rating:5,text:'Program diet dari Bu dokter sangat terstruktur dan mudah diikuti. Sudah turun 5 kg!'},{name:'Hendra K.',date:'4 hari lalu',rating:4,text:'Penjelasan tentang nutrisi sangat detail. Sangat membantu kondisi diabetes saya.'},{name:'Putri M.',date:'2 minggu lalu',rating:5,text:'Konsultasi sangat membantu rencana makan saya. Terima kasih dokter!'}] },
  { id:4, name:'dr. Ahmad Fauzi, Sp.JP', spec:'Jantung', specLabel:'Spesialis Jantung', hospital:'RS Pondok Indah', experience:15, rating:4.9, reviews:421, price:200000, online:true, slots:2, about:'Dokter spesialis jantung dan pembuluh darah dengan lebih dari 15 tahun pengalaman. Ahli dalam penanganan penyakit jantung koroner, gagal jantung, aritmia, dan rehabilitasi kardiovaskular. Fellow American College of Cardiology.', education:'FK UI | Fellowship Kardiologi Intervensi RSCM 2009 | FACC', languages:['Indonesia','Inggris'], initials:'AF', color:'linear-gradient(135deg,#F78166,#DC2626)', reviews_list:[{name:'Bambang S.',date:'3 hari lalu',rating:5,text:'Dokter senior yang sangat kompeten. Penjelasan kondisi jantung saya sangat jelas.'},{name:'Lestari W.',date:'1 minggu lalu',rating:5,text:'Ayah saya sembuh berkat penanganan dr. Fauzi. Sangat bersyukur.'},{name:'Wawan P.',date:'2 minggu lalu',rating:4,text:'Profesional dan detail. Program rehabilitasi yang diberikan sangat membantu.'}] },
  { id:5, name:'dr. Yuliana Dewi, Sp.A', spec:'Anak', specLabel:'Spesialis Anak', hospital:'RSIA Hermina', experience:7, rating:4.8, reviews:378, price:100000, online:true, slots:6, about:'Dokter spesialis anak berpengalaman menangani berbagai kondisi mulai dari bayi baru lahir hingga remaja. Fokus pada tumbuh kembang, nutrisi anak, imunisasi, dan penanganan penyakit infeksi.', education:'FK Unpad | Sp.A FK UI 2017', languages:['Indonesia'], initials:'YD', color:'linear-gradient(135deg,#F0C060,#D97706)', reviews_list:[{name:'Ani K.',date:'1 hari lalu',rating:5,text:'Dokternya sabar banget sama anak saya yang rewel. Anaknya sampai suka.'},{name:'Dimas P.',date:'3 hari lalu',rating:5,text:'Sangat informatif soal tumbuh kembang anak.'},{name:'Reni S.',date:'5 hari lalu',rating:4,text:'Penanganannya baik. Anak saya cepat sembuh dari demam tinggi.'}] },
  { id:6, name:'dr. Kevin Santoso, Sp.KK', spec:'Kulit', specLabel:'Spesialis Kulit & Kelamin', hospital:'Klinik Estetika Prima', experience:5, rating:4.7, reviews:156, price:150000, online:true, slots:4, about:'Dokter spesialis kulit dan kelamin dengan minat khusus pada estetika kulit, penanganan jerawat dan bekas luka, dermatitis, dan prosedur kulit terkini.', education:'FK Universitas Trisakti | Sp.KK FKUI 2019', languages:['Indonesia','Inggris'], initials:'KS', color:'linear-gradient(135deg,#60A5FA,#2563EB)', reviews_list:[{name:'Clara T.',date:'1 hari lalu',rating:5,text:'Jerawat saya berkurang drastis setelah ikut program perawatan dari dr. Kevin.'},{name:'Reza F.',date:'5 hari lalu',rating:4,text:'Konsultasi online-nya cepat dan responsif.'},{name:'Linda W.',date:'1 minggu lalu',rating:5,text:'Dokter muda yang sangat berpengalaman.'}] },
  { id:7, name:'drg. Melinda Sari, Sp.Ort', spec:'Gigi', specLabel:'Spesialis Ortodonti', hospital:'Klinik Gigi SmileCare', experience:9, rating:4.6, reviews:203, price:175000, online:false, slots:3, about:'Dokter gigi spesialis ortodonti berpengalaman dalam pemasangan kawat gigi konvensional dan clear aligner, penanganan gigi berjejal, gigitan terbuka, dan koreksi rahang.', education:'FKG UGM | Sp.Ort FKG UI 2015', languages:['Indonesia'], initials:'MS', color:'linear-gradient(135deg,#F87171,#7C3AED)', reviews_list:[{name:'Nanda A.',date:'2 hari lalu',rating:5,text:'Proses pasang behel sangat nyaman dan hasilnya rapi. Sangat puas!'},{name:'Bagas P.',date:'1 minggu lalu',rating:4,text:'Dokternya teliti dan sabar menjelaskan proses perawatan.'},{name:'Vita R.',date:'2 minggu lalu',rating:5,text:'Gigi saya sudah rapi setelah 1.5 tahun treatment.'}] },
  { id:8, name:'dr. Doni Prasetyo, Sp.S', spec:'Saraf', specLabel:'Spesialis Saraf', hospital:'RS Pusat Otak Nasional', experience:12, rating:4.8, reviews:267, price:180000, online:true, slots:2, about:'Neurolog berpengalaman dalam penanganan stroke, epilepsi, migrain, neuropati, Parkinson, dan demensia. Aktif dalam penelitian terkait penanganan stroke akut dan rehabilitasi neurologis.', education:'FK Undip | Sp.S FKUI 2012 | Konsultan Neurologi Vaskular', languages:['Indonesia','Inggris'], initials:'DP', color:'linear-gradient(135deg,#BC8CFF,#0ABAB5)', reviews_list:[{name:'Surya W.',date:'3 hari lalu',rating:5,text:'Migrain saya yang bertahun-tahun akhirnya bisa diatasi. Luar biasa!'},{name:'Heny M.',date:'1 minggu lalu',rating:5,text:'Penanganan ayah saya pasca stroke sangat komprehensif.'},{name:'Joko S.',date:'2 minggu lalu',rating:4,text:'Dokter berpengalaman dan sangat detail dalam pemeriksaan.'}] }
];

MediZen.storage.set('doctors', DOCTORS);

let currentSpec = 'all', currentSort = 'rating', searchQuery = '';

function renderDoctors() {
  let filtered = DOCTORS.filter(d => {
    const matchSpec = currentSpec === 'all' || d.spec === currentSpec;
    const q = searchQuery.toLowerCase();
    const matchSearch = !q || d.name.toLowerCase().includes(q) || d.specLabel.toLowerCase().includes(q) || d.hospital.toLowerCase().includes(q);
    return matchSpec && matchSearch;
  });
  if (currentSort === 'rating') filtered.sort((a,b) => b.rating - a.rating);
  else if (currentSort === 'price') filtered.sort((a,b) => a.price - b.price);
  else if (currentSort === 'experience') filtered.sort((a,b) => b.experience - a.experience);
  else if (currentSort === 'reviews') filtered.sort((a,b) => b.reviews - a.reviews);

  const list = document.getElementById('doctors-list');
  const empty = document.getElementById('empty-state');
  document.getElementById('result-count').textContent = filtered.length + ' dokter ditemukan';

  if (!filtered.length) { list.innerHTML=''; empty.classList.remove('hidden'); return; }
  empty.classList.add('hidden');

  list.innerHTML = filtered.map(d => {
    const priceLabel = d.price === 0 ? '<span class="tag-free">Gratis</span>' : 'Rp ' + d.price.toLocaleString('id-ID');
    return `<a class="doctor-card" href="detail.html?id=${d.id}">
      <div class="doctor-avatar" style="background:${d.color};">${d.initials}${d.online ? '<div class="online-badge"></div>' : ''}</div>
      <div class="doctor-info">
        <div class="doctor-name">${d.name}</div>
        <div class="doctor-spec">${d.specLabel}</div>
        <div class="doctor-meta">
          <div class="doctor-meta-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" stroke="none" class="rating-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg><span class="rating-star">${d.rating}</span><span>(${d.reviews})</span></div>
          <div class="doctor-meta-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg><span>${d.experience} thn pengalaman</span></div>
        </div>
        <div class="doctor-meta" style="margin-top:4px;"><div class="doctor-meta-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg><span>${d.hospital}</span></div></div>
        <div class="doctor-price">${priceLabel} <span>/ sesi</span></div>
        ${d.slots > 0 ? `<div class="slots-badge"><span style="width:6px;height:6px;background:var(--accent-green);border-radius:50%;display:inline-block;"></span> ${d.slots} slot tersedia</div>` : ''}
      </div>
    </a>`;
  }).join('');
}

document.getElementById('spec-filter').addEventListener('click', e => {
  const chip = e.target.closest('.filter-chip');
  if (!chip) return;
  document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
  chip.classList.add('active');
  currentSpec = chip.dataset.spec;
  renderDoctors();
});

let st;
document.getElementById('search-input').addEventListener('input', e => {
  clearTimeout(st);
  st = setTimeout(() => { searchQuery = e.target.value; renderDoctors(); }, 300);
});

document.getElementById('sort-select').addEventListener('change', e => { currentSort = e.target.value; renderDoctors(); });

renderDoctors();
</script>
</body>
</html>
